# 自动重定向

## 插件名称

| 名称    | 字段            | 属性   |
|-------|---------------|------|
| 自动重定向 | auto_redirect | 响应处理 |

## 功能描述

当上游服务返回 301 或 302 状态码时，网关将自动重定向到新地址，并将新地址的响应内容返回给客户端。此外，该插件支持多次重定向，即当重定向后的新地址返回的状态码仍为 301 或 302 时，网关将继续重定向，直到收到的响应状态码不再是 301 或 302。

## 配置示例
```json
{
    "max_redirect_count": 3,
    "auto_redirect": false,
    "path_prefix": "/web"
}
```
**字段描述**

| 字段                 | 类型      | 描述                                                                                                                                                                       |
|--------------------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| max_redirect_count | int     | 最大重定向次数，该值需大于0小于10                                                                                                                                                       |
| auto_redirect      | bool    | 当遇到301、302状态码时，网关是否重定向到新的地址                                                                                                                                              |
| path_prefix        | string  | 重定向路径前缀，该值会填充响应头`Location`的参数值。<br/>假设原`Location`为：`http://www.apinto.com/user/info` ，设置的`path_prefix`为：`/web`<br/>经过修改后，Location：`http://www.apinto.com/web/user/info`  |

### 开启重定向插件前
网关直接透传后端服务响应内容，如下图：

![](http://data.eolinker.com/course/h73TwHc51d64c0c4cab4f881d1431fb762bdd3282396b99.png)

### 开启重定向插件后
网关自动重定向到新页面，客户端/浏览器无感知，如下图：

![](http://data.eolinker.com/course/5bFrhe712548fd77d85db4bd39513a1ae6d3e57ea81e94b.png)